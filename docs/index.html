<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ConstructorAutocomplete  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="ConstructorAutocomplete  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">ConstructorAutocomplete 3.3.7 Docs</a> (94% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">ConstructorAutocomplete Reference</a>
        <img id="carat" src="img/carat.png" alt=""/>
        ConstructorAutocomplete  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Client.html">Client</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/ConstructorIOConfig.html">ConstructorIOConfig</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ConstructorIO.html">ConstructorIO</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Result%20Request%20Structures.html">Result Request Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CIOAutocompleteQuery.html">CIOAutocompleteQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOBrowseQuery.html">CIOBrowseQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOBrowseItemsQuery.html">CIOBrowseItemsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOBrowseFacetsQuery.html">CIOBrowseFacetsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOBrowseFacetOptionsQuery.html">CIOBrowseFacetOptionsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOBrowseGroupsQuery.html">CIOBrowseGroupsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIORecommendationsQuery.html">CIORecommendationsQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOSearchQuery.html">CIOSearchQuery</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOQuizQuery.html">CIOQuizQuery</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Result%20Request%20Builders.html">Result Request Builders</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/CIOAutocompleteQueryBuilder.html">CIOAutocompleteQueryBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOBrowseQueryBuilder.html">CIOBrowseQueryBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOBrowseItemsQueryBuilder.html">CIOBrowseItemsQueryBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOBrowseFacetsQueryBuilder.html">CIOBrowseFacetsQueryBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOBrowseFacetOptionsQueryBuilder.html">CIOBrowseFacetOptionsQueryBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOBrowseGroupsQueryBuilder.html">CIOBrowseGroupsQueryBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIORecommendationsQueryBuilder.html">CIORecommendationsQueryBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOSearchQueryBuilder.html">CIOSearchQueryBuilder</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Response%20Structures.html">Response Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CIOAutocompleteResponse.html">CIOAutocompleteResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOBrowseResponse.html">CIOBrowseResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOBrowseFacetsResponse.html">CIOBrowseFacetsResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOBrowseFacetOptionsResponse.html">CIOBrowseFacetOptionsResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIORecommendationsResponse.html">CIORecommendationsResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOSearchResponse.html">CIOSearchResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOQuizQuestionResponse.html">CIOQuizQuestionResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOQuizResultsResponse.html">CIOQuizResultsResponse</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Result%20Structures%20%26%20Classes.html">Result Structures &amp; Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/CIOAutocompleteResult.html">CIOAutocompleteResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOFilterFacet.html">CIOFilterFacet</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOFilterFacetOption.html">CIOFilterFacetOption</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOFilterGroup.html">CIOFilterGroup</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOGroup.html">CIOGroup</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIORecommendationsPod.html">CIORecommendationsPod</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIORecommendationsStrategy.html">CIORecommendationsStrategy</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOResult.html">CIOResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOResultData.html">CIOResultData</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOResultFacet.html">CIOResultFacet</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOSearchRedirectInfo.html">CIOSearchRedirectInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOSortOption.html">CIOSortOption</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOQuizQuestion.html">CIOQuizQuestion</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOQuizOption.html">CIOQuizOption</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOQuizOptionAttribute.html">CIOQuizOptionAttribute</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOQuizImages.html">CIOQuizImages</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/CIOQuizResult.html">CIOQuizResult</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/CIOCollectionData.html">CIOCollectionData</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOResultSourceData.html">CIOResultSourceData</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CIOResultSources.html">CIOResultSources</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CIORefinedContent.html">CIORefinedContent</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><img src="https://img.shields.io/badge/platform-iOS-blue.svg?style=flat" alt="Platform iOS" /> <img src="https://img.shields.io/badge/Swift-3.0+-blue.svg" alt="Swift 3+ compatible" /> <img src="https://img.shields.io/badge/Objective--C-compatible-blue.svg" alt="Objective-C compatible" /> <img  src="http://img.shields.io/badge/license-MIT-blue.svg?style=flat" alt="License: MIT" /></p>
<h1 id='constructor-io-swift-client' class='heading'>Constructor.io Swift Client</h1>

<p>An iOS Client for <a href="http://constructor.io/">Constructor.io</a>.  <a href="http://constructor.io/">Constructor.io</a> provides search as a service that optimizes results using artificial intelligence (including natural language processing, re-ranking to optimize for conversions, and user personalization).</p>
<h2 id='documentation' class='heading'>Documentation</h2>

<p>Full API documentation is available on <a href="https://constructor-io.github.io/constructorio-client-swift/">Github Pages</a></p>
<h2 id='1-import' class='heading'>1. Import</h2>
<h3 id='1-a-import-using-cocoapods' class='heading'>1.a Import using CocoaPods</h3>

<p>First make sure you have <a href="https://guides.cocoapods.org/using/getting-started.html">CocoaPods installed</a>.  Then create an empty text file in your project’s root directory called ‘Podfile’. Add the following lines to the file:</p>
<pre class="highlight plaintext"><code>target ‘YOUR_TARGET_NAME’ do
   pod ‘ConstructorAutocomplete'
end
</code></pre>

<p>Open the terminal (make sure you’re located in the project root) and type</p>
<pre class="highlight shell"><code>pod <span class="nb">install</span>
</code></pre>
<h3 id='1-b-import-using-carthage' class='heading'>1.b Import using Carthage</h3>

<p>First, make sure you have <a href="https://github.com/Carthage/Carthage#installing-carthage">Carthage installed</a>. Then create an empty text file called ‘Cartfile’ in your project root directory. Now, add the following lines:</p>
<pre class="highlight plaintext"><code>github "Constructor-io/constructorio-client-swift"
</code></pre>

<p>Open the terminal (make sure you’re located in the project root) and type</p>
<pre class="highlight shell"><code>carthage update
</code></pre>

<p>Drag the <code>ConstructorIO.framework</code> from Carthage/Build/iOS into your project and link it with your application target. Also, make sure to copy the framework by adding a new Copy Files phase.</p>
<h2 id='2-retrieve-an-api-key' class='heading'>2. Retrieve an API key</h2>

<p>You can find this in your <a href="https://constructor.io/dashboard">Constructor.io dashboard</a>.  Contact sales if you&rsquo;d like to sign up, or support if you believe your company already has an account.</p>
<h2 id='3-create-a-client-instance' class='heading'>3. Create a Client Instance</h2>

<p>Make sure to import the <code>ConstructorAutocomplete</code> module at the top of your source file and then write the following</p>
<pre class="highlight swift"><code><span class="c1">// Create the client config</span>
<span class="k">let</span> <span class="nv">config</span> <span class="o">=</span> <span class="kt">ConstructorIOConfig</span><span class="p">(</span>
   <span class="nv">apiKey</span><span class="p">:</span> <span class="s">"YOUR API KEY"</span><span class="p">,</span>
   <span class="nv">baseURL</span><span class="p">:</span> <span class="s">"ac.cnstrc.com"</span><span class="p">,</span> <span class="c1">// default</span>
   <span class="nv">resultCount</span><span class="p">:</span> <span class="kt">AutocompleteResultCount</span><span class="p">(</span><span class="nv">numResultsForSection</span><span class="p">:</span> <span class="p">[</span><span class="s">"Search Suggestions"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">"Products"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">])</span>
<span class="p">)</span>

<span class="c1">// Create the client instance</span>
<span class="k">let</span> <span class="nv">constructorIO</span> <span class="o">=</span> <span class="kt">ConstructorIO</span><span class="p">(</span><span class="nv">config</span><span class="p">:</span> <span class="n">config</span><span class="p">)</span>

<span class="c1">// Set the user ID (for a logged in user) used for cross device personalization</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="n">userID</span> <span class="o">=</span> <span class="s">"abcdefghijk-123"</span>
</code></pre>
<h2 id='4-retrieving-the-clientid-and-sessionid' class='heading'>4. Retrieving the clientID and sessionID</h2>

<p>If you are retrieving results from your backend servers instead of direclty using our SDK, there are certain personalization parameters that are needed to be passed along with your requests. And those parameters can be accessed from the Constructor instance.</p>

<ol>
<li><strong>Client Id</strong></li>
</ol>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">constructorClientId</span> <span class="o">=</span> <span class="n">constructorIO</span><span class="o">.</span><span class="n">clientID</span>
</code></pre>

<ol>
<li><strong>Session Id</strong></li>
</ol>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">constructorSessionId</span> <span class="o">=</span> <span class="n">constructorIO</span><span class="o">.</span><span class="n">sessionID</span>
</code></pre>

<p>In most cases, you will want to store those parameters as cookies preferably as <strong>ConstructorioID_client_id</strong> and <strong>ConstructorioID_session_id</strong> to be sent with your requests to your backend servers.</p>
<h2 id='5-setting-test-cell-information-for-a-b-tests' class='heading'>5. Setting test cell information for A/B tests</h2>

<p>When A/B testing, it is important to specify which cell the user is being assigned to. Information about the test cell can be set through the <code><a href="Structs/ConstructorIOConfig.html">ConstructorIOConfig</a></code> object.</p>
<pre class="highlight kotlin"><code><span class="n">let</span> <span class="n">testCell</span> <span class="p">=</span> <span class="nc">CIOABTestCell</span>

<span class="n">let</span> <span class="n">config</span> <span class="p">=</span> <span class="nc">ConstructorIOConfig</span><span class="p">(</span>
   <span class="n">apiKey</span><span class="p">:</span> <span class="s">"YOUR API KEY"</span><span class="p">,</span>
   <span class="n">baseURL</span><span class="p">:</span> <span class="s">"ac.cnstrc.com"</span><span class="p">,</span> <span class="c1">// default</span>
   <span class="n">testCells</span><span class="p">:</span> <span class="p">[</span><span class="nc">CIOABTestCell</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="s">"constructorio_test"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s">"control_1"</span><span class="p">)]</span>
<span class="p">)</span>

<span class="c1">// Create the client instance</span>
<span class="n">let</span> <span class="n">constructorIO</span> <span class="p">=</span> <span class="nc">ConstructorIO</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">)</span>

<span class="c1">// The test cells in the config can be edited after instantiating the client instance</span>
<span class="n">constructorIO</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">testCells</span> <span class="p">=</span> <span class="p">[</span><span class="nc">CIOABTestCell</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="s">"constructorio_test"</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="s">"experiment_1"</span><span class="p">)]</span>
</code></pre>
<h2 id='6-request-autocomplete-results' class='heading'>6. Request Autocomplete Results</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CIOAutocompleteQuery</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="s">"apple"</span><span class="p">,</span> <span class="nv">numResultsForSection</span><span class="p">:</span> <span class="p">[</span><span class="s">"Products"</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s">"Search Suggestions"</span><span class="p">:</span> <span class="mi">8</span><span class="p">])</span>

<span class="n">constructorIO</span><span class="o">.</span><span class="nf">autocomplete</span><span class="p">(</span><span class="nv">forQuery</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span><span class="o">!</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
<h2 id='7-request-search-results' class='heading'>7. Request Search Results</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">filters</span> <span class="o">=</span> <span class="kt">CIOQueryFilters</span><span class="p">(</span><span class="nv">groupFilter</span><span class="p">:</span> <span class="s">"Bread"</span><span class="p">,</span> <span class="nv">facetFilters</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"Nutrition"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"Organic"</span><span class="p">),</span>
  <span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"Nutrition"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"Natural"</span><span class="p">),</span>
  <span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"Nutrition"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"Whole-grain"</span><span class="p">)</span>
<span class="p">])</span>
<span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CIOSearchQuery</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="s">"Dave's Bread"</span><span class="p">,</span> <span class="nv">page</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="nv">filters</span><span class="p">:</span> <span class="n">filters</span><span class="p">)</span>

<span class="c1">// Specify the sort order in which groups are returned</span>
<span class="k">let</span> <span class="nv">groupsSortOption</span> <span class="o">=</span> <span class="kt">CIOGroupsSortOption</span><span class="p">(</span><span class="nv">sortBy</span><span class="p">:</span> <span class="kt">CIOGroupsSortBy</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nv">sortOrder</span><span class="p">:</span> <span class="kt">CIOGroupsSortOrder</span><span class="o">.</span><span class="n">ascending</span><span class="p">)</span>

<span class="n">constructorIO</span><span class="o">.</span><span class="nf">search</span><span class="p">(</span><span class="nv">forQuery</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="nv">filters</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span> <span class="nv">groupsSortOption</span><span class="p">:</span> <span class="n">groupsSortOption</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span><span class="o">!</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
<h2 id='8-request-browse-results' class='heading'>8. Request Browse Results</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CIOBrowseQuery</span><span class="p">(</span><span class="nv">filterName</span><span class="p">:</span> <span class="s">"potato"</span><span class="p">,</span> <span class="nv">filterValue</span><span class="p">:</span> <span class="s">"russet"</span><span class="p">)</span>

<span class="c1">// Specify the sort order in which groups are returned</span>
<span class="k">let</span> <span class="nv">groupsSortOption</span> <span class="o">=</span> <span class="kt">CIOGroupsSortOption</span><span class="p">(</span><span class="nv">sortBy</span><span class="p">:</span> <span class="kt">CIOGroupsSortBy</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="nv">sortOrder</span><span class="p">:</span> <span class="kt">CIOGroupsSortOrder</span><span class="o">.</span><span class="n">ascending</span><span class="p">)</span>

<span class="n">constructorIO</span><span class="o">.</span><span class="nf">browse</span><span class="p">(</span><span class="nv">forQuery</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="nv">groupsSortOption</span><span class="p">:</span> <span class="n">groupsSortOption</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span><span class="o">!</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
<h2 id='9-request-recommendation-results' class='heading'>9. Request Recommendation Results</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CIORecommendationsQuery</span><span class="p">(</span><span class="nv">podID</span><span class="p">:</span> <span class="s">"pdp_best_sellers"</span><span class="p">,</span> <span class="nv">filters</span><span class="p">:</span> <span class="n">filters</span><span class="p">)</span>

<span class="n">constructorIO</span><span class="o">.</span><span class="nf">recommendations</span><span class="p">(</span><span class="nv">forQuery</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span><span class="o">!</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
<h3 id='with-an-item-id-for-the-alternative-complementary-items-recommendations-strategy' class='heading'>With an item id for the alternative/complementary items recommendations strategy</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">itemId</span> <span class="o">=</span> <span class="s">"P18232"</span>
<span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CIORecommendationsQuery</span><span class="p">(</span><span class="nv">podID</span><span class="p">:</span> <span class="s">"pdp_complementary_items"</span><span class="p">,</span> <span class="nv">itemID</span><span class="p">:</span> <span class="n">itemId</span><span class="p">)</span>

<span class="n">constructorIO</span><span class="o">.</span><span class="nf">recommendations</span><span class="p">(</span><span class="nv">forQuery</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span><span class="o">!</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
<h3 id='with-filters-for-the-filtered-item-recommendations-strategy' class='heading'>With filters for the filtered item recommendations strategy</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">filters</span> <span class="o">=</span> <span class="kt">CIOQueryFilters</span><span class="p">(</span><span class="nv">groupFilter</span><span class="p">:</span> <span class="s">"cat_1234"</span><span class="p">,</span> <span class="nv">facetFilters</span><span class="p">:</span> <span class="p">[</span>
  <span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"Nutrition"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"Organic"</span><span class="p">),</span>
  <span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"Nutrition"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"Natural"</span><span class="p">),</span>
  <span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"Brand"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"Kroger"</span><span class="p">)</span>
<span class="p">])</span>
<span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CIORecommendationsQuery</span><span class="p">(</span><span class="nv">podID</span><span class="p">:</span> <span class="s">"pdp_filtered_items"</span><span class="p">,</span> <span class="nv">filters</span><span class="p">:</span> <span class="n">filters</span><span class="p">)</span>

<span class="n">constructorIO</span><span class="o">.</span><span class="nf">recommendations</span><span class="p">(</span><span class="nv">forQuery</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span><span class="o">!</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
<h2 id='10-request-quiz-next-question' class='heading'>10. Request Quiz Next Question</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CIOQuizQuery</span><span class="p">(</span><span class="nv">quizID</span><span class="p">:</span> <span class="s">"quiz-1"</span><span class="p">,</span> <span class="nv">answers</span><span class="p">:</span> <span class="p">[[</span><span class="s">"1"</span><span class="p">],</span> <span class="p">[</span><span class="s">"2"</span><span class="p">]])</span>

<span class="n">constructorIO</span><span class="o">.</span><span class="nf">getQuizNextQuestion</span><span class="p">(</span><span class="nv">forQuery</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span><span class="o">!</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
<h2 id='11-request-quiz-results' class='heading'>11. Request Quiz Results</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">query</span> <span class="o">=</span> <span class="kt">CIOQuizQuery</span><span class="p">(</span><span class="nv">quizID</span><span class="p">:</span> <span class="s">"quiz-1"</span><span class="p">,</span> <span class="nv">answers</span><span class="p">:</span> <span class="p">[[</span><span class="s">"1"</span><span class="p">],</span> <span class="p">[</span><span class="s">"2"</span><span class="p">]])</span>

<span class="n">constructorIO</span><span class="o">.</span><span class="nf">getQuizResults</span><span class="p">(</span><span class="nv">forQuery</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="o">!</span>
  <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">error</span><span class="o">!</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre>
<h2 id='12-instrument-behavioral-events' class='heading'>12. Instrument Behavioral Events</h2>

<p>The iOS Client sends behavioral events to <a href="http://constructor.io/">Constructor.io</a> in order to continuously learn and improve results for future Autosuggest and Search requests.  The Client only sends events in response to being called by the consuming app or in response to user interaction . For example, if the consuming app never calls the SDK code, no events will be sent.  Besides the explicitly passed in event parameters, all user events contain a GUID based user ID that the client sets to identify the user as well as a session ID.</p>

<p>Three types of these events exist:</p>

<ol>
<li><strong>General Events</strong> are sent as needed when an instance of the Client is created or initialized</li>
<li><strong>Autocomplete Events</strong> measure user interaction with autocomplete results</li>
<li><strong>Search Events</strong> measure user interaction with search results</li>
<li><strong>Browse Events</strong> measure user interaction with browse results</li>
<li><strong>Recommendation Events</strong> measure user interaction with recommendations</li>
<li><strong>Quiz Events</strong> measure user interaction with quiz results</li>
<li><strong>Conversion Events</strong> measure user events like <code>add to cart</code> or <code>purchase</code></li>
</ol>
<h3 id='autocomplete-events' class='heading'>Autocomplete Events</h3>
<pre class="highlight swift"><code><span class="c1">// Track when the user focuses into the search bar</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackInputFocus</span><span class="p">(</span><span class="nv">searchTerm</span><span class="p">:</span> <span class="s">""</span><span class="p">)</span>

<span class="c1">// Track when the user selects an autocomplete suggestion</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackAutocompleteSelect</span><span class="p">(</span><span class="nv">searchTerm</span><span class="p">:</span> <span class="s">"toothpicks"</span><span class="p">,</span> <span class="nv">originalQuery</span><span class="p">:</span> <span class="s">"tooth"</span><span class="p">,</span> <span class="nv">sectionName</span><span class="p">:</span> <span class="s">"Search Suggestions"</span><span class="p">,</span> <span class="nv">group</span><span class="p">:</span> <span class="kt">CIOGroup</span><span class="p">(</span><span class="nv">displayName</span><span class="p">:</span> <span class="s">"Dental Health"</span><span class="p">,</span> <span class="nv">groupID</span><span class="p">:</span> <span class="s">"dental-92dk2"</span><span class="p">,</span> <span class="nv">path</span><span class="p">:</span> <span class="s">"health-2911e/dental-92dk2"</span><span class="p">),</span> <span class="nv">resultID</span><span class="p">:</span> <span class="s">"179b8a0e-3799-4a31-be87-127b06871de2"</span><span class="p">)</span>

<span class="c1">// Track when the user submits a search (either by selecting a suggestion or not selecting a suggestion)</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackSearchSubmit</span><span class="p">(</span><span class="nv">searchTerm</span><span class="p">:</span> <span class="s">"toothpicks"</span><span class="p">,</span> <span class="nv">originalQuery</span><span class="p">:</span> <span class="s">"tooth"</span><span class="p">)</span>
</code></pre>
<h3 id='search-events' class='heading'>Search Events</h3>
<pre class="highlight swift"><code><span class="c1">// Track when search results are loaded into view (customer ID's are the ID's of shown items)</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackSearchResultsLoaded</span><span class="p">(</span><span class="nv">searchTerm</span><span class="p">:</span> <span class="s">"tooth"</span><span class="p">,</span> <span class="nv">resultCount</span><span class="p">:</span> <span class="mi">789</span><span class="p">,</span> <span class="nv">customerIDs</span><span class="p">:</span> <span class="p">[</span><span class="s">"1234567-AB"</span><span class="p">,</span> <span class="s">"1234765-CD"</span><span class="p">,</span> <span class="s">"1234576-DE"</span><span class="p">])</span>

<span class="c1">// Track when a search result is clicked</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackSearchResultClick</span><span class="p">(</span><span class="nv">itemName</span><span class="p">:</span> <span class="s">"Fashionable Toothpicks"</span><span class="p">,</span> <span class="nv">customerID</span><span class="p">:</span> <span class="s">"1234567-AB"</span><span class="p">,</span> <span class="nv">variationID</span><span class="p">:</span> <span class="s">"1234567-AB-7463"</span><span class="p">,</span> <span class="nv">searchTerm</span><span class="p">:</span> <span class="s">"tooth"</span><span class="p">,</span> <span class="nv">sectionName</span><span class="p">:</span> <span class="s">"Products"</span><span class="p">,</span>  <span class="nv">resultID</span><span class="p">:</span> <span class="s">"179b8a0e-3799-4a31-be87-127b06871de2"</span><span class="p">)</span>
</code></pre>
<h3 id='browse-events' class='heading'>Browse Events</h3>
<pre class="highlight swift"><code><span class="c1">// Track when browse results are loaded into view</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackBrowseResultsLoaded</span><span class="p">(</span><span class="nv">filterName</span><span class="p">:</span> <span class="s">"Category"</span><span class="p">,</span> <span class="nv">filterValue</span><span class="p">:</span> <span class="s">"Snacks"</span><span class="p">,</span> <span class="nv">resultCount</span><span class="p">:</span> <span class="mi">674</span><span class="p">)</span>

<span class="c1">// Track when browse results are loaded into view with items array (supported in v3.1.2 and above)</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackBrowseResultsLoaded</span><span class="p">(</span><span class="nv">filterName</span><span class="p">:</span> <span class="s">"Category"</span><span class="p">,</span> <span class="nv">filterValue</span><span class="p">:</span> <span class="s">"Snacks"</span><span class="p">,</span> <span class="nv">resultCount</span><span class="p">:</span> <span class="mi">674</span><span class="p">,</span> <span class="nv">customerIDs</span><span class="p">:</span> <span class="p">[</span><span class="s">"1234567-AB"</span><span class="p">,</span> <span class="s">"1234765-CD"</span><span class="p">,</span> <span class="s">"1234576-DE"</span><span class="p">])</span>

<span class="c1">// Track when a browse result is clicked</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackBrowseResultClick</span><span class="p">(</span><span class="nv">filterName</span><span class="p">:</span> <span class="s">"Category"</span><span class="p">,</span> <span class="nv">filterValue</span><span class="p">:</span> <span class="s">"Snacks"</span><span class="p">,</span> <span class="nv">customerID</span><span class="p">:</span> <span class="s">"7654321-BA"</span><span class="p">,</span> <span class="nv">variationID</span><span class="p">:</span> <span class="s">"7654321-BA-738"</span><span class="p">,</span> <span class="nv">resultPositionOnPage</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nv">sectionName</span><span class="p">:</span> <span class="s">"Products"</span><span class="p">,</span> <span class="nv">resultID</span><span class="p">:</span> <span class="s">"179b8a0e-3799-4a31-be87-127b06871de2"</span><span class="p">)</span>
</code></pre>
<h3 id='recommendations-events' class='heading'>Recommendations Events</h3>
<pre class="highlight swift"><code><span class="c1">// Track when recommendation results are viewed</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackRecommendationResultsView</span><span class="p">(</span><span class="nv">podID</span><span class="p">:</span> <span class="s">"pdp_best_sellers"</span><span class="p">,</span> <span class="nv">numResultsViewed</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="nv">resultPage</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">resultCount</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">resultID</span><span class="p">:</span> <span class="s">"179b8a0e-3799-4a31-be87-127b06871de2"</span><span class="p">)</span>

<span class="c1">// Track when a recomendation result is clicked</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackRecommendationResultClick</span><span class="p">(</span><span class="nv">podID</span><span class="p">:</span> <span class="s">"pdp_best_sellers"</span><span class="p">,</span> <span class="nv">strategyID</span><span class="p">:</span> <span class="s">"best_sellers"</span><span class="p">,</span> <span class="nv">customerID</span><span class="p">:</span> <span class="s">"P183021"</span><span class="p">,</span> <span class="nv">variationID</span><span class="p">:</span> <span class="s">"7281930"</span><span class="p">,</span> <span class="nv">numResultsPerPage</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="nv">resultPage</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">resultCount</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="nv">resultPositionOnPage</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">resultID</span><span class="p">:</span> <span class="s">"179b8a0e-3799-4a31-be87-127b06871de2"</span><span class="p">)</span>
</code></pre>
<h3 id='quiz-events' class='heading'>Quiz Events</h3>
<pre class="highlight swift"><code><span class="c1">// Track when a quiz result is clicked</span>
<span class="kt">ConstructorIo</span><span class="o">.</span><span class="nf">trackQuizResultClick</span><span class="p">(</span><span class="nv">quizID</span><span class="p">:</span> <span class="s">"coffee-quiz"</span><span class="p">,</span> <span class="nv">quizVersionID</span><span class="p">:</span> <span class="s">"1231244"</span><span class="p">,</span> <span class="nv">quizSessionID</span><span class="p">:</span> <span class="s">"123"</span><span class="p">,</span> <span class="nv">customerID</span><span class="p">:</span> <span class="s">"123"</span><span class="p">,</span> <span class="nv">itemName</span><span class="p">:</span> <span class="s">"espresso"</span><span class="p">)</span>

<span class="c1">// Track when quiz results are loaded</span>
<span class="kt">ConstructorIo</span><span class="o">.</span><span class="nf">trackQuizResultsLoaded</span><span class="p">(</span><span class="nv">quizID</span><span class="p">:</span> <span class="s">"coffee-quiz"</span><span class="p">,</span> <span class="nv">quizVersionID</span><span class="p">:</span> <span class="s">"1231244"</span><span class="p">,</span> <span class="nv">quizSessionID</span><span class="p">:</span> <span class="s">"123"</span><span class="p">,</span> <span class="nv">resultCount</span><span class="p">:</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1">// Track when a quiz result is converted on</span>
<span class="kt">ConstructorIo</span><span class="o">.</span><span class="nf">trackQuizConversion</span><span class="p">(</span><span class="nv">quizID</span><span class="p">:</span> <span class="s">"coffee-quiz"</span><span class="p">,</span> <span class="nv">quizVersionID</span><span class="p">:</span> <span class="s">"1231244"</span><span class="p">,</span> <span class="nv">quizSessionID</span><span class="p">:</span> <span class="s">"123"</span><span class="p">,</span> <span class="nv">customerID</span><span class="p">:</span> <span class="s">"123"</span><span class="p">,</span> <span class="nv">variationID</span><span class="p">:</span> <span class="s">"167"</span><span class="p">,</span> <span class="nv">itemName</span><span class="p">:</span> <span class="s">"espresso"</span><span class="p">,</span> <span class="nv">revenue</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">)</span>

</code></pre>
<h3 id='conversion-events' class='heading'>Conversion Events</h3>
<pre class="highlight swift"><code><span class="c1">// Track when an item converts (a.k.a. is added to cart) regardless of the user journey that led to adding to cart</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackConversion</span><span class="p">(</span><span class="nv">itemName</span><span class="p">:</span> <span class="s">"Fashionable Toothpicks"</span><span class="p">,</span> <span class="nv">customerID</span><span class="p">:</span> <span class="s">"1234567-AB"</span><span class="p">,</span> <span class="nv">variationID</span><span class="p">:</span> <span class="s">"1234567-AB-47398"</span><span class="p">,</span> <span class="nv">revenue</span><span class="p">:</span> <span class="mf">12.99</span><span class="p">,</span> <span class="nv">searchTerm</span><span class="p">:</span> <span class="s">"tooth"</span><span class="p">,</span> <span class="nv">conversionType</span><span class="p">:</span> <span class="s">"add_to_cart"</span><span class="p">)</span>

<span class="c1">// Track when items are purchased</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackPurchase</span><span class="p">(</span><span class="nv">customerIDs</span><span class="p">:</span> <span class="p">[</span><span class="s">"123-AB"</span><span class="p">,</span> <span class="s">"456-CD"</span><span class="p">],</span> <span class="nv">revenue</span><span class="p">:</span> <span class="mf">34.49</span><span class="p">,</span> <span class="nv">orderID</span><span class="p">:</span> <span class="s">"343-315"</span><span class="p">)</span>

<span class="c1">// Tracking items w/ variations in purchases (supported in v2.5.5 and above)</span>
<span class="k">let</span> <span class="nv">purchaseItems</span> <span class="o">=</span> <span class="p">[</span>
  <span class="kt">CIOItem</span><span class="p">(</span><span class="nv">customerID</span><span class="p">:</span> <span class="s">"custID1"</span><span class="p">,</span> <span class="nv">variationID</span><span class="p">:</span> <span class="s">"varID1"</span><span class="p">,</span> <span class="nv">quantity</span><span class="p">:</span> <span class="mi">2</span><span class="p">),</span>
  <span class="kt">CIOItem</span><span class="p">(</span><span class="nv">customerID</span><span class="p">:</span> <span class="s">"custID2"</span><span class="p">,</span> <span class="nv">variationID</span><span class="p">:</span> <span class="s">"varID2"</span><span class="p">,</span> <span class="nv">quantity</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">]</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackPurchase</span><span class="p">(</span><span class="nv">items</span><span class="p">:</span> <span class="n">purchaseItems</span><span class="p">,</span> <span class="nv">revenue</span><span class="p">:</span> <span class="mf">93.89</span><span class="p">,</span> <span class="nv">orderID</span><span class="p">:</span> <span class="s">"423-2432"</span><span class="p">)</span>
</code></pre>
<h3 id='miscellaneous-events' class='heading'>Miscellaneous Events</h3>
<pre class="highlight swift"><code><span class="c1">// Track when a product detail page is loaded (a.k.a after a user clicks on an item)</span>
<span class="n">constructorIO</span><span class="o">.</span><span class="nf">trackItemDetailLoad</span><span class="p">(</span><span class="nv">customerID</span><span class="p">:</span> <span class="s">"10001"</span><span class="p">,</span> <span class="nv">itemName</span><span class="p">:</span> <span class="s">"item1"</span><span class="p">,</span> <span class="nv">variationID</span><span class="p">:</span> <span class="s">"var1"</span><span class="p">,</span> <span class="nv">sectionName</span><span class="p">:</span> <span class="s">"Products"</span><span class="p">)</span>
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2024 <a class="link" href="https://www.constructor.io" target="_blank" rel="external noopener">Zubin Tiku, Christopher Gee, and Jimmy Li</a>. All rights reserved. (Last updated: 2024-01-26)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
